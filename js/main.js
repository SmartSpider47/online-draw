const firebaseConfig={apiKey:"AIzaSyCjaC7uuNWAiSx4KsXtcGHqrJtxCfaP_vU",authDomain:"onlinedraw-43013.firebaseapp.com",databaseURL:"https://onlinedraw-43013-default-rtdb.firebaseio.com",projectId:"onlinedraw-43013",storageBucket:"onlinedraw-43013.appspot.com",messagingSenderId:"947162335413",appId:"1:947162335413:web:ad12e9ab0ccb86938716fc"};var User;firebase.initializeApp(firebaseConfig);var wrongSymbol="\\/|'\"`~.#$[](){}";function PyArrayed(e){var t="";e.length>0&&(t+="'"+e[0]+"'");for(var a=1;a<e.length;a++)t+="  '"+e[a]+"'";return t}function Exist(e,t){for(var a=0;a<t.length;a++)if(t[a]==e)return!0;return!1}function Mistake(e){var t="";t+=e;for(var a=0;a<wrongSymbol.length;a++)if(Exist(wrongSymbol[a],t))return!0;return!1}function Simp(e){var t="",a="";if(""==(t+=e))return t;a+=t[0];for(var r=1;r<t.length;r++)" "==t[r]&&" "==t[r-1]||(a+=t[r]);return a}document.getElementById("id_btn_create").onclick=function(){var e=document.getElementById("id_create_name").value,t=document.getElementById("id_create_draw").value;e=Simp(e),t=Simp(t),document.getElementById("id_create_name").value=e,document.getElementById("id_create_draw").value=t,""!=e&&" "!=e?""!=t&&" "!=t?Mistake(e)?alert("Имя не может содержать символы "+PyArrayed(wrongSymbol)):Mistake(t)?alert("Имя рисунка не может содержать символы "+PyArrayed(wrongSymbol)):firebase.database().ref().child(t).get().then(a=>{a.exists()?alert("Рисунок с этим именем уже существует!"):(firebase.database().ref(t+"/data").set({creator:e,picture:""}),firebase.database().ref(t+"/users/"+e).set({canedit:"1"}),localStorage.setItem("ss47_odraw_user_n",e),localStorage.setItem("ss47_odraw_draw_n",t),window.location="draw/index.html")}).catch(e=>{alert("Нет подключения.."),console.error(e)}):alert("Имя рисунка не может быть пустым!"):alert("Имя не может быть пустым!")},document.getElementById("id_btn_enter").onclick=function(){var e=document.getElementById("id_enter_name").value,t=document.getElementById("id_enter_draw").value;e=Simp(e),t=Simp(t),document.getElementById("id_enter_name").value=e,document.getElementById("id_enter_draw").value=t,""!=e&&" "!=e?""!=t&&" "!=t?Mistake(e)?alert("Имя не может содержать символы "+PyArrayed(wrongSymbol)):Mistake(t)?alert("Имя рисунка не может содержать символы "+PyArrayed(wrongSymbol)):firebase.database().ref().child(t).get().then(a=>{if(a.exists()){var r=a.val(),n="0";e==r.data.creator&&(n="1"),firebase.database().ref(t+"/users/"+e).set({canedit:n}),localStorage.setItem("ss47_odraw_user_n",e),localStorage.setItem("ss47_odraw_draw_n",t),window.location="draw/index.html"}else alert("Рисунка с этим именем не существует!")}).catch(e=>{alert("Нет подключения.."),console.error(e)}):alert("Имя рисунка не может быть пустым!"):alert("Имя не может быть пустым!")};
